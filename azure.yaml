# yaml-language-server: $schema=https://raw.githubusercontent.com/Azure/azure-dev/main/schemas/v1.0/azure.yaml.json

name: sports-prediction-system
metadata:
  template: sports-prediction-system@0.0.1-beta

infra:
  provider: terraform
  path: infra

services:
  sports-functions:
    project: .
    language: py
    host: function

hooks:
  predeploy:
    windows:
      shell: pwsh
      run: |
        Write-Host "Installing Python dependencies..."
        pip install -r requirements.txt
    posix:
      shell: sh
      run: |
        echo "Installing Python dependencies..."
        pip install -r requirements.txt

  postdeploy:
    windows:
      shell: pwsh
      run: |
        Write-Host "Deployment completed successfully!"
        Write-Host "Function App URL: $env:FUNCTION_APP_URL"
        Write-Host "API Endpoints:"
        Write-Host "  - Predictions: $env:API_PREDICTIONS_URL"
        Write-Host "  - Data Ingestion: $env:API_SPORTS_DATA_URL"
        Write-Host "  - Game Predictor: $env:API_GAME_PREDICTOR_URL"
    posix:
      shell: sh
      run: |
        echo "Deployment completed successfully!"
        echo "Function App URL: $FUNCTION_APP_URL"
        echo "API Endpoints:"
        echo "  - Predictions: $API_PREDICTIONS_URL"
        echo "  - Data Ingestion: $API_SPORTS_DATA_URL"
        echo "  - Game Predictor: $API_GAME_PREDICTOR_URL"
